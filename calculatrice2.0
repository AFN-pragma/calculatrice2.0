import math

class Calculatrice:
    def __init__(self):
        self.operations = {
            '+': lambda x, y: x + y,
            '-': lambda x, y: x - y,
            '*': lambda x, y: x * y,
            '/': lambda x, y: x / y,
        }

    def add_operation(self, symbole, fonction):
        self.operations[symbole] = fonction

    def calculer(self, num1, symbole, num2):
      if symbole not in self.operations:
        raise Exception("Opération non valide")
      if not isinstance(num1, (int, float)) or not isinstance(num2, (int, float)):
        raise Exception("Les valeurs d'entrée doivent être des nombres")
      return self.operations[symbole](num1 , num2)


# Création d'une instance de la classe Calculatrice
calc = Calculatrice()

# Ajout des opérations mathématiques avancées
calc.add_operation('^', lambda x, y: math.pow(x, y))
calc.add_operation('√', lambda x, y: math.pow(x, 1/y))
calc.add_operation('log', lambda x, y: math.log(x, y))

while True:
    num1 = input("Entrez le premier nombre : ")
    operation = input("Entrez l'opération : ")
    num2 = input("Entrez le deuxième nombre : ")

    try:
        num1 = float(num1)
        num2 = float(num2)
        resultat = calc.calculer(num1, operation, num2)
        print(f"Le résultat est : {resultat}")
    except Exception as e:
        print(f"Une erreur s'est produite : {str(e)}")

    R = input('Do you want to continue? (yes/no): ')
    if R.lower() == 'yes':
      Calculatrice()
    else:
      break
